"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=require("react"),React__default=_interopDefault(React);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function parseList(e){if(!getListType(e))return null;for(var t=[],n=[],r={},a=e.split("\n"),o=null,c=0;c<a.length;c++){var i=getListType(a[c]);i?(o?r[i.indent]||(r[i.indent]=[i.ordered?"ol":"ul"],o.push(r[i.indent])):(t.push(i.ordered?"ol":"ul"),o=t,r[i.indent]=t),r[i.indent].push(i),o=r[i.indent]):n.push("<p>".concat(a[c],"</p>"))}return n.push(closeNodes(t).join("\n")),n.join("\n")}function getListType(e){var t=/^([\t\s]*)(?:([\d]+\.)|([*-]))[\s][\S]/gim.exec(e);if(!t)return!1;var n=t[1].length;return t[2]?ListType(t[2],n,e.substr(n+t[2].length+1),!0):ListType(t[3],n,e.substr(n+t[3].length+1),!1)}function closeNodes(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=["".concat(pad(2*t),"<").concat(e[0],">")],r=1;r<e.length;r++)Array.isArray(e[r])?(n.push("".concat(pad(2*t+2),"<li>")),(n=n.concat(closeNodes(e[r],t+2))).push("".concat(pad(2*t+2),"</li>"))):n.push("".concat(pad(2*t+2),"<li>").concat(e[r].text,"</li>"));return n.concat("".concat(pad(2*t),"</").concat(e[0],">"))}function pad(e){return"".padStart(e)}function ListType(e,t,n,r){return{match:e,indent:t,text:n,ordered:r}}function parser(e,t){var n=[parseBlock,parseBold,parseItalic,parseAnchors,parseInlineCode].reduce(function(e,t){return t(e)},e);if(t&&"undefined"!=typeof sessionStorage){var r=sessionStorage.getItem(sessionKey(t));if(r)return r;sessionStorage.setItem(sessionKey(t),n)}return n}function parseBlock(e){var t=e.split("\n\n"),n=t.length,r=!1,a=[parseCodeStart,parseList,parseHeader,parseImages,parseParagraph];return t.reduce(function(e,t,o){var c=o+1<n?"\n":"";if(r){var i=parseCodeEnd(t);return r=!i,"".concat(e,"\n").concat(i||t).concat(c)}var s=a.reduce(function(e,n){if(!e){var a=n(t);if(a&&n===parseCodeStart){var o=parseCodeEnd(a);return o||(r=!0,a)}return a}return e},null);return"".concat(e).concat(s).concat(c)},"")}function parseParagraph(e){return"<p>".concat(e,"</p>")}function parseCodeStart(e){var t=!1,n=e.replace(/^```([\w]+)?/gim,function(e,n){return t=!0,n?'<code class="language-'.concat(n,'">'):"<code>"});return t?n:null}function parseCodeEnd(e){var t=!1,n=e.replace(/```$/m,function(e){return t=!0,"</code>"});return t?n:null}function parseInlineCode(e){for(var t,n=/<code[^>]*>([\s\S]+?)<\/code>/gim,r=/`([^`]+)`/gi,a=[],o=0;t=n.exec(e);)0===o&&t.index>0?a.push({type:"string",content:e.substring(0,t.index)}):o<t.index-1&&a.push({type:"string",content:e.substring(o,t.index)}),a.push({type:"code",content:e.substring(t.index,n.lastIndex)}),o=n.lastIndex;return a.push({type:"string",content:e.substring(o)}),a.reduce(function(e,t){var n=t.type,a=t.content;return"string"===n?e.concat(a.replace(r,function(e,t,n){return"<code>".concat(t,"</code>")})):e.concat(a)},[]).join("")}function parseHeader(e){var t=/^([#]+)[\s](.+)/gim;return e.search(t)<0?null:e.replace(t,function(e,t,n){return"<h".concat(t.length,">").concat(n,"</h").concat(t.length,">")})}function parseBold(e){return e.replace(/\*\*([\S].+?[\S])\*\*/gi,function(e,t){return"<strong>".concat(t,"</strong>")})}function parseItalic(e){return e.replace(/\*([^\s\*].+?[^\s\*])\*/gi,function(e,t){return"<i>".concat(t,"</i>")})}function parseImages(e){var t=/!\[([^\]]+)\]\(([^\)]+)\)/gi.exec(e);if(!t)return null;var n=t.index,r=_slicedToArray(t,3),a=r[0],o=r[1],c=r[2],i=e.substr(0,n),s=e.substr(n+a.length);return'<div class="image-wrapper">'.concat(i,'<img src="').concat(c,'" alt="').concat(o,'" />').concat(s,"</div>")}function parseAnchors(e){return e.replace(/\[([^\]]+)\]\(([^\)]+)\)/gi,function(e,t,n){return'<a href="'.concat(n,'">').concat(t,"</a>")})}function sessionKey(e){return"markdown.parser.".concat(e)}var index=React.memo(function(e){var t=e.cacheid,n=e.data,r=_objectWithoutProperties(e,["cacheid","data"]);return React__default.createElement("div",_extends({},r,{dangerouslySetInnerHTML:{__html:parser(n,t)}}))});module.exports=index;